---
import hafsData from "../data/hafs.json";
import BaseLayout from "../layouts/BaseLayout.astro";
import SurahName from "../components/SurahName.astro";
import FloatingControls from "../components/FloatingControls.astro";

// Get unique surahs by grouping by sura_no
const surahsMap = new Map();
hafsData.forEach((aya) => {
  if (!surahsMap.has(aya.sura_no)) {
    surahsMap.set(aya.sura_no, {
      number: aya.sura_no,
      nameEn: aya.sura_name_en,
      nameAr: aya.sura_name_ar,
    });
  }
});

const surahs = Array.from(surahsMap.values()).sort(
  (a, b) => a.number - b.number,
);
---

<BaseLayout title="Al-Qur'an">
  <h1 class="mt-8 mb-16 font-serif text-5xl">Al-Qur'an</h1>
  <ul class="list-none p-0 pb-8">
    {
      surahs.map((surah) => (
        <li class="my-4" id={surah.number}>
          <a
            href={`/${surah.number}`}
            class="flex items-center justify-between rounded border border-neutral-300 px-6 py-6 text-black no-underline transition-colors duration-200 hover:bg-neutral-100 dark:border-neutral-600 dark:text-white dark:hover:bg-neutral-800"
          >
            <div class="flex items-center gap-8">
              <span class="min-w-8 font-sans text-xl font-bold text-neutral-500 dark:text-neutral-400">
                {surah.number}
              </span>
              <span class="font-serif text-2xl">{surah.nameEn}</span>
            </div>
            <SurahName surah={surah.number} />
          </a>
        </li>
      ))
    }
  </ul>
  <FloatingControls />
</BaseLayout>
